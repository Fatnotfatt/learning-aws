<!doctype html><html lang=vi class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.152.2"><meta name=description content><meta name=author content="thienlh@thienlu.com"><link rel=icon href=/learning-aws/images/favicon.png type=image/png><title>Blog 3 :: Báo cáo thực tập</title><link href=/learning-aws/css/nucleus.css?1765270353 rel=stylesheet><link href=/learning-aws/css/fontawesome-all.min.css?1765270353 rel=stylesheet><link href=/learning-aws/css/hybrid.css?1765270353 rel=stylesheet><link href=/learning-aws/css/featherlight.min.css?1765270353 rel=stylesheet><link href=/learning-aws/css/perfect-scrollbar.min.css?1765270353 rel=stylesheet><link href=/learning-aws/css/auto-complete.css?1765270353 rel=stylesheet><link href=/learning-aws/css/atom-one-dark-reasonable.css?1765270353 rel=stylesheet><link href=/learning-aws/css/theme.css?1765270353 rel=stylesheet><link href=/learning-aws/css/tabs.css?1765270353 rel=stylesheet><link href=/learning-aws/css/hugo-theme.css?1765270353 rel=stylesheet><link href=/learning-aws/css/theme-workshop.css?1765270353 rel=stylesheet><script src=/learning-aws/js/jquery-3.3.1.min.js?1765270353></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/learning-aws/vi/3-blogstranslated/3.3-blog3/><nav id=sidebar class=showVisitedLinks><div id=header-wrapper><div id=header><a id=logo href=/><svg id="Layer_1" data-name="Layer 1" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff}.cls-2{fill:#f90;fill-rule:evenodd}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09 10.85a4.7 4.7.0 00.19 1.48 7.73 7.73.0 00.54 1.19.77.77.0 01.12.38.64.64.0 01-.32.49l-1 .7a.83.83.0 01-.44.15.69.69.0 01-.49-.23 3.8 3.8.0 01-.6-.77q-.25-.42-.51-1a6.14 6.14.0 01-4.89 2.3 4.54 4.54.0 01-3.32-1.19 4.27 4.27.0 01-1.22-3.2 4.28 4.28.0 011.46-3.4A6.06 6.06.0 017.69 6.46a12.47 12.47.0 011.76.13q.92.13 1.91.36V5.73a3.65 3.65.0 00-.79-2.66A3.81 3.81.0 007.86 2.3a7.71 7.71.0 00-1.79.22 12.78 12.78.0 00-1.79.57 4.55 4.55.0 01-.58.22h-.26q-.35.0-.35-.52V2a1.09 1.09.0 01.12-.58 1.2 1.2.0 01.47-.35A10.88 10.88.0 015.77.32 10.19 10.19.0 018.36.0a6 6 0 014.35 1.35 5.49 5.49.0 011.38 4.09zM7.34 13.38a5.36 5.36.0 001.72-.31A3.63 3.63.0 0010.63 12 2.62 2.62.0 0011.19 11a5.63 5.63.0 00.16-1.44v-.7a14.35 14.35.0 00-1.53-.28 12.37 12.37.0 00-1.56-.1 3.84 3.84.0 00-2.47.67A2.34 2.34.0 005 11a2.35 2.35.0 00.61 1.76A2.4 2.4.0 007.34 13.38zm13.35 1.8a1 1 0 01-.64-.16 1.3 1.3.0 01-.35-.65L15.81 1.51a3 3 0 01-.15-.67.36.36.0 01.41-.41H17.7a1 1 0 01.65.16 1.4 1.4.0 01.33.65l2.79 11 2.59-11A1.17 1.17.0 0124.39.6a1.1 1.1.0 01.67-.16H26.4a1.1 1.1.0 01.67.16 1.17 1.17.0 01.32.65L30 12.39 32.88 1.25A1.39 1.39.0 0133.22.6a1 1 0 01.65-.16h1.54a.36.36.0 01.41.41 1.36 1.36.0 010 .26 3.64 3.64.0 01-.12.41l-4 12.86a1.3 1.3.0 01-.35.65 1 1 0 01-.64.16H29.25a1 1 0 01-.67-.17 1.26 1.26.0 01-.32-.67L25.67 3.64l-2.56 10.7a1.26 1.26.0 01-.32.67 1 1 0 01-.67.17zm21.36.44a11.28 11.28.0 01-2.56-.29 7.44 7.44.0 01-1.92-.67 1 1 0 01-.61-.93v-.84q0-.52.38-.52a.9.9.0 01.31.06l.42.17a8.77 8.77.0 001.83.58 9.78 9.78.0 002 .2 4.48 4.48.0 002.43-.55 1.76 1.76.0 00.86-1.57 1.61 1.61.0 00-.45-1.16A4.29 4.29.0 0043 9.22l-2.41-.76A5.15 5.15.0 0138 6.78a3.94 3.94.0 01-.83-2.41 3.7 3.7.0 01.45-1.85 4.47 4.47.0 011.19-1.37 5.27 5.27.0 011.7-.86A7.4 7.4.0 0142.6.0a8.87 8.87.0 011.12.07q.57.07 1.08.19t.95.26a4.27 4.27.0 01.7.29 1.59 1.59.0 01.49.41.94.94.0 01.15.55v.79q0 .52-.38.52a1.76 1.76.0 01-.64-.2 7.74 7.74.0 00-3.2-.64 4.37 4.37.0 00-2.21.47 1.6 1.6.0 00-.79 1.48 1.58 1.58.0 00.49 1.18 4.94 4.94.0 001.83.92L44.55 7a5.08 5.08.0 012.57 1.6A3.76 3.76.0 0147.9 11a4.21 4.21.0 01-.44 1.93 4.4 4.4.0 01-1.21 1.47 5.43 5.43.0 01-1.85.93A8.25 8.25.0 0142.05 15.62z"/><path class="cls-2" d="M45.19 23.81C39.72 27.85 31.78 30 25 30A36.64 36.64.0 01.22 20.57c-.51-.46-.06-1.09.56-.74A49.78 49.78.0 0025.53 26.4 49.23 49.23.0 0044.4 22.53C45.32 22.14 46.1 23.14 45.19 23.81z"/><path class="cls-2" d="M47.47 21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74 3.13-2.2 8.27-1.57 8.86-.83s-.16 5.89-3.09 8.35c-.45.38-.88.18-.68-.32C46.69 25.8 48.17 22.11 47.47 21.21z"/></svg></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/learning-aws/js/lunr.min.js?1765270353></script><script type=text/javascript src=/learning-aws/js/auto-complete.js?1765270353></script><script type=text/javascript>var baseurl="https://Fatnotfatt.github.io/learning-aws//vi"</script><script type=text/javascript src=/learning-aws/js/search.js?1765270353></script></div><section id=homelinks><ul><li><a class=padding href=/><i class='fas fa-home'></i> Home</a></li></ul></section><div class=highlightable><ul class=topics><li data-nav-id=/learning-aws/vi/1-worklog/ title="Nhật ký công việc" class=dd-item><a href=/learning-aws/vi/1-worklog/><b>1. </b>Nhật ký công việc
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/learning-aws/vi/1-worklog/1.11-week11/ title="Worklog Tuần 11" class=dd-item><a href=/learning-aws/vi/1-worklog/1.11-week11/><b>1.11. </b>Worklog Tuần 11
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/1-worklog/1.10-week10/ title="Worklog Tuần 10" class=dd-item><a href=/learning-aws/vi/1-worklog/1.10-week10/><b>1.10. </b>Worklog Tuần 10
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/1-worklog/1.9-week9/ title="Worklog Tuần 9" class=dd-item><a href=/learning-aws/vi/1-worklog/1.9-week9/><b>1.9. </b>Worklog Tuần 9
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/1-worklog/1.8-week8/ title="Worklog Tuần 8" class=dd-item><a href=/learning-aws/vi/1-worklog/1.8-week8/><b>1.8. </b>Worklog Tuần 8
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/1-worklog/1.7-week7/ title="Worklog Tuần 7" class=dd-item><a href=/learning-aws/vi/1-worklog/1.7-week7/><b>1.7. </b>Worklog Tuần 7
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/1-worklog/1.6-week6/ title="Worklog Tuần 6" class=dd-item><a href=/learning-aws/vi/1-worklog/1.6-week6/><b>1.6. </b>Worklog Tuần 6
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/1-worklog/1.5-week5/ title="Worklog Tuần 5" class=dd-item><a href=/learning-aws/vi/1-worklog/1.5-week5/><b>1.5. </b>Worklog Tuần 5
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/1-worklog/1.4-week4/ title="Worklog Tuần 4" class=dd-item><a href=/learning-aws/vi/1-worklog/1.4-week4/><b>1.4. </b>Worklog Tuần 4
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/1-worklog/1.3-week3/ title="Worklog Tuần 3" class=dd-item><a href=/learning-aws/vi/1-worklog/1.3-week3/><b>1.3. </b>Worklog Tuần 3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/1-worklog/1.1-week1/ title="Worklog Tuần 1" class=dd-item><a href=/learning-aws/vi/1-worklog/1.1-week1/><b>1.1. </b>Worklog Tuần 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/1-worklog/1.2-week2/ title="Worklog Tuần 2" class=dd-item><a href=/learning-aws/vi/1-worklog/1.2-week2/><b>1.2. </b>Worklog Tuần 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/1-worklog/1.12-week12/ title="Worklog Tuần 12" class=dd-item><a href=/learning-aws/vi/1-worklog/1.12-week12/><b>1.12. </b>Worklog Tuần 12
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/learning-aws/vi/2-proposal/ title="Bản đề xuất" class=dd-item><a href=/learning-aws/vi/2-proposal/><b>2. </b>Bản đề xuất
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/3-blogstranslated/ title="Các bài blogs đã dịch" class="dd-item
parent"><a href=/learning-aws/vi/3-blogstranslated/><b>3. </b>Các bài blogs đã dịch
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/learning-aws/vi/3-blogstranslated/3.1-blog1/ title="Blog 1" class=dd-item><a href=/learning-aws/vi/3-blogstranslated/3.1-blog1/><b>3.1. </b>Blog 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/3-blogstranslated/3.2-blog2/ title="Blog 2" class=dd-item><a href=/learning-aws/vi/3-blogstranslated/3.2-blog2/><b>3.2. </b>Blog 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/3-blogstranslated/3.3-blog3/ title="Blog 3" class="dd-item
active"><a href=/learning-aws/vi/3-blogstranslated/3.3-blog3/><b>3.3. </b>Blog 3
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/learning-aws/vi/4-eventparticipated/ title="Các events đã tham gia" class=dd-item><a href=/learning-aws/vi/4-eventparticipated/><b>4. </b>Các events đã tham gia
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/learning-aws/vi/4-eventparticipated/4.5-event5/ title="Event 5" class=dd-item><a href=/learning-aws/vi/4-eventparticipated/4.5-event5/><b>4.5. </b>Event 5
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/4-eventparticipated/4.4-event4/ title="Event 4" class=dd-item><a href=/learning-aws/vi/4-eventparticipated/4.4-event4/><b>4.4. </b>Event 4
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/4-eventparticipated/4.1-event1/ title="Event 1" class=dd-item><a href=/learning-aws/vi/4-eventparticipated/4.1-event1/><b>4.11. </b>Event 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/4-eventparticipated/4.2-event2/ title="Event 2" class=dd-item><a href=/learning-aws/vi/4-eventparticipated/4.2-event2/><b>4.22. </b>Event 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/4-eventparticipated/4.3-event3/ title="Event 3" class=dd-item><a href=/learning-aws/vi/4-eventparticipated/4.3-event3/><b>4.3. </b>Event 3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/4-eventparticipated/4.6-event6/ title="Event 6" class=dd-item><a href=/learning-aws/vi/4-eventparticipated/4.6-event6/><b>4.6. </b>Event 6
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/learning-aws/vi/5-workshop/ title=Workshop class=dd-item><a href=/learning-aws/vi/5-workshop/><b>5. </b>Workshop
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/learning-aws/vi/5-workshop/5.1-workshop-overview/ title="Tổng quan Workshop" class=dd-item><a href=/learning-aws/vi/5-workshop/5.1-workshop-overview/><b>5.1 </b>Tổng quan Workshop
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/5-workshop/5.2-prerequisite/ title="Chuẩn bị & Yêu cầu" class=dd-item><a href=/learning-aws/vi/5-workshop/5.2-prerequisite/><b>5.2 </b>Chuẩn bị & Yêu cầu
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/5-workshop/5.2-prerequiste/ title="Các bước chuẩn bị" class=dd-item><a href=/learning-aws/vi/5-workshop/5.2-prerequiste/><b>5.2. </b>Các bước chuẩn bị
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/5-workshop/5.3-deploy-infrastructure/ title="Triển khai Infrastructure với CloudFormation" class=dd-item><a href=/learning-aws/vi/5-workshop/5.3-deploy-infrastructure/><b>5.3 </b>Triển khai Infrastructure với CloudFormation
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/5-workshop/5.4-deploy-backend/ title="Triển khai Backend Application" class=dd-item><a href=/learning-aws/vi/5-workshop/5.4-deploy-backend/><b>5.4 </b>Triển khai Backend Application
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/5-workshop/5.5-deploy-frontend/ title="Triển khai Frontend" class=dd-item><a href=/learning-aws/vi/5-workshop/5.5-deploy-frontend/><b>5.5 </b>Triển khai Frontend
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/5-workshop/5.6-testing/ title="Kiểm tra và Xác thực" class=dd-item><a href=/learning-aws/vi/5-workshop/5.6-testing/><b>5.6 </b>Kiểm tra và Xác thực
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/5-workshop/5.7-monitoring/ title="Giám sát và Xử lý sự cố" class=dd-item><a href=/learning-aws/vi/5-workshop/5.7-monitoring/><b>5.7 </b>Giám sát và Xử lý sự cố
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/5-workshop/5.9-cleanup/ title="Dọn dẹp tài nguyên" class=dd-item><a href=/learning-aws/vi/5-workshop/5.9-cleanup/><b>5.8 </b>Dọn dẹp tài nguyên
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/5-workshop/5.8-cicd-pipeline/ title="Thiết lập CI/CD Pipeline" class=dd-item><a href=/learning-aws/vi/5-workshop/5.8-cicd-pipeline/><b>5.8. </b>Thiết lập CI/CD Pipeline
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/learning-aws/vi/6-self-evaluation/ title="Tự đánh giá" class=dd-item><a href=/learning-aws/vi/6-self-evaluation/><b>6. </b>Tự đánh giá
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/learning-aws/vi/7-feedback/ title="Chia sẻ, đóng góp ý kiến" class=dd-item><a href=/learning-aws/vi/7-feedback/><b>7. </b>Chia sẻ, đóng góp ý kiến
<i class="fas fa-check read-icon"></i></a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://www.facebook.com/groups/awsstudygroupfcj/><i class='fab fa-facebook'></i> AWS Study Group</a></li></ul></section><section id=prefooter><hr><ul><li><a class=padding><i class="fas fa-language fa-fw"></i><div class=select-style><select id=select-language onchange="location=this.value"><option id=en value=https://Fatnotfatt.github.io/learning-aws/3-blogstranslated/3.3-blog3/>English</option><option id=vi value=https://Fatnotfatt.github.io/learning-aws/vi/3-blogstranslated/3.3-blog3/ selected>Tiếng Việt</option></select>
<svg id="Capa_1" xmlns:xlink="http://www.w3.org/1999/xlink" width="255" height="255" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255"><g><g id="arrow-drop-down"><polygon points="0,63.75 127.5,191.25 255,63.75"/></g></g></svg></div></a></li><li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Clear History</a></li></ul></section><section id=footer><left><b>Workshop</b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title=Migrate alt="web counter" border=0></a><br><b><a href=https://cloudjourney.awsstudygroup.com/>Cloud Journey</a></b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" alt="web counter" border=0>
</left><left><br><br><b>Last Updated</b><br><i><span id=lastUpdated style=color:orange></span>
</i><script>const today=new Date,formattedDate=today.toLocaleDateString("en-GB");document.getElementById("lastUpdated").textContent=formattedDate</script></left><left><br><br><b>Team</b><br><i><a href=https://www.facebook.com/groups/660548818043427 style=color:orange>First Cloud Journey</a><br></i></left><script async defer src=https://buttons.github.io/buttons.js></script></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=/learning-aws/vi/>Báo cáo thực tập</a> > <a href=/learning-aws/vi/3-blogstranslated/>Các bài blogs đã dịch</a> > Blog 3</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#yêu-cầu-chuẩn-bị-prerequisites><strong>Yêu cầu chuẩn bị (Prerequisites)</strong></a></li><li><a href=#full-text-search-trong-postgresql><strong>Full-text search trong PostgreSQL</strong></a><ul><li><a href=#contains-predicate-với-toán-tử-and><strong>CONTAINS predicate với toán tử AND</strong></a></li><li><a href=#chứa-vị-ngữ-với-toán-tử-or><strong>Chứa vị ngữ với toán tử OR</strong></a></li><li><a href=#vị-ngữ-freetext><strong>Vị ngữ FREETEXT</strong></a></li><li><a href=#hàm-freetexttable-với-rank><strong>Hàm FREETEXTTABLE với RANK</strong></a></li><li><a href=#các-hàm-containstable-và-formsof-với-rank><strong>Các hàm CONTAINSTABLE và FORMSOF với RANK</strong></a></li></ul></li><li><a href=#cải-thiện-hiệu-suất-truy-vấn-trong-postgresql><strong>Cải thiện hiệu suất truy vấn trong PostgreSQL</strong></a><ul><li><a href=#giải-pháp-1-sử-dụng-chỉ-mục-gin><strong>Giải pháp 1: Sử dụng chỉ mục GIN</strong></a></li><li><a href=#giải-pháp-2-sử-dụng-cột-được-tạo-đã-lưu-trữ><strong>Giải pháp 2: Sử dụng cột được tạo đã lưu trữ</strong></a></li></ul></li><li><a href=#tìm-kiếm-toàn-văn-bản-trong-postgresql-bằng-tiện-ích-mở-rộng-pg_trgm><strong>Tìm kiếm toàn văn bản trong PostgreSQL bằng tiện ích mở rộng pg_trgm</strong></a></li><li><a href=#tìm-kiếm-toàn-văn-bản-trong-postgresql-bằng-tiện-ích-mở-rộng-pg_bigm><strong>Tìm kiếm toàn văn bản trong PostgreSQL bằng tiện ích mở rộng pg_bigm</strong></a></li><li><a href=#phần-kết-luận><strong>Phần kết luận</strong></a><ul><li></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Blog 3</h1><h1 id=di-chuyển-tìm-kiếm-toàn-văn-từ-sql-server-sang-amazon-aurora-postgresql-compatible-edition-hoặc-amazon-rds-for-postgresql><strong>Di chuyển tìm kiếm toàn văn từ SQL Server sang Amazon Aurora PostgreSQL-Compatible Edition hoặc Amazon RDS for PostgreSQL</strong></h1><hr><p>Tác giả: Sivaprasad Appana , Surya Nallu , và Saumitra Das</p><p>Ngày đăng: 19 tháng 8, 2024</p><hr><p>Trong thế giới dữ liệu ngày nay, khả năng tìm và truy xuất thông tin từ các tập dữ liệu lớn là rất quan trọng. Mặc dù một số hệ quản trị cơ sở dữ liệu (cả thương mại và mã nguồn mở) nổi trội trong xử lý dữ liệu cấu trúc, PostgreSQL cũng cung cấp các công cụ mạnh mẽ để tìm kiếm dữ liệu không cấu trúc hoặc bán cấu trúc. PostgreSQL có sẵn full-text search (FTS) tích hợp, và còn hỗ trợ các extension như pg_trgm và pg_bigm cho việc tìm kiếm văn bản.</p><p>Các truy vấn truyền thống dùng toán tử LIKE, ILIKE hoặc biểu thức chính quy rất phù hợp để tìm chuỗi chính xác hoặc dữ liệu cấu trúc, nhưng có hạn chế nếu cần tìm trong các vùng văn bản lớn như tài liệu, bài viết hoặc mô tả sản phẩm.</p><p>Khi di chuyển từ một cơ sở dữ liệu thương mại như SQL Server sang PostgreSQL (như Amazon Aurora PostgreSQL-Compatible hoặc Amazon RDS for PostgreSQL), việc di chuyển full-text search đòi hỏi phải sửa đổi các truy vấn và cấu trúc schema, vì cách triển khai FTS giữa hai hệ thống khác nhau. Công cụ AWS Schema Conversion Tool (AWS SCT) không tự động chuyển đổi mã liên quan full-text search.</p><p>SQL Server FTS được thiết kế để tìm từ, cụm từ hay các dạng từ (stemming) trong dữ liệu văn bản không cấu trúc. Nó hỗ trợ tìm nhanh, xếp hạng và lập chỉ mục văn bản, giúp ứng dụng xử lý lượng lớn thông tin dạng văn bản hiệu quả.</p><p>Trong bài viết này, chúng tôi sẽ hướng dẫn cách di chuyển full-text search từ SQL Server sang Amazon Aurora PostgreSQL bằng cách sử dụng các kiểu dữ liệu tsvector và tsquery. Đồng thời, chúng tôi cũng chỉ cách triển khai FTS bằng extension pg_trgm và pg_bigm.</p><hr><h2 id=yêu-cầu-chuẩn-bị-prerequisites><strong>Yêu cầu chuẩn bị (Prerequisites)</strong></h2><p>Trong bài này, chúng tôi sử dụng cơ sở dữ liệu mẫu AdventureWorks2019 để minh họa cách di chuyển FTS từ SQL Server 2019 Standard sang PostgreSQL.</p><p>Các bước chính để thiết lập FTS trong SQL Server:</p><ol><li>Kích hoạt full-text search cho database AdventureWorks2019:</li></ol><p>USE [AdventureWorks2019]<br>GO<br>EXEC sp_fulltext_database &rsquo;enable&rsquo;<br>GO</p><ol start=2><li>Tạo một full-text catalog:</li></ol><p>CREATE FULLTEXT CATALOG DescFTSCatalog;</p><p>GO</p><p>Full-text catalog là thành phần logic để quản lý các chỉ mục full-text, xác định các word breakers và stemmers theo ngôn ngữ.</p><ol start=3><li>Định nghĩa một full-text index cho các cột chứa dữ liệu văn bản mà bạn muốn tìm:</li></ol><p>CREATE FULLTEXT INDEX<br>ON<br>[AdventureWorks2019].[Production].[ProductDescription]([Description])<br>KEY INDEX [PK_ProductDescription_ProductDescriptionID]<br>ON DescFTSCatalog<br>GO</p><ol start=4><li>Sử dụng AWS SCT và AWS Database Migration Service (AWS DMS) để chuyển cơ sở dữ liệu AdventureWorks 2019 từ SQL Server sang Amazon Aurora PostgreSQL. Trong bài, chúng tôi chuyển bảng Product Description.</li></ol><p>PostgreSQL có vài lựa chọn để tìm kiếm trong văn bản: tìm chính xác, pattern matching, biểu thức chính quy và full-text search. Trong phần tiếp theo, chúng tôi hướng dẫn cách sử dụng FTS trong PostgreSQL trên database đã chuyển để đạt kết quả tương tự.</p><h2 id=full-text-search-trong-postgresql><strong>Full-text search trong PostgreSQL</strong></h2><p>Toán tử LIKE, ILIKE và biểu thức chính quy được dùng trong mệnh đề WHERE cho tìm theo mẫu. Tuy nhiên, LIKE / ILIKE không hỗ trợ xếp hạng và thường bỏ qua các từ như “the”, “is”, v.v. PostgreSQL cung cấp FTS bằng cách sử dụng tsvector và tsquery, cùng các hàm, toán tử và tham số liên quan.</p><ul><li><p>tsvector: kiểu dữ liệu đại diện cho phiên bản đã xử lý của văn bản (tách từ, loại bỏ stop words, giảm về lexeme), tối ưu cho tìm kiếm text nhanh. Hàm to_tsvector chuyển văn bản sang tsvector.</p></li><li><p>tsquery: chứa một hoặc nhiều lexeme dùng để tìm. Lexeme có thể được kết hợp với các toán tử để tạo điều kiện tìm phức tạp. Hàm to_tsquery hoặc plainto_ts query chuyển truy vấn tìm kiếm sang tsquery.</p></li></ul><p>Ví dụ: “He is running in the park” → các từ “he”, “run”, “park” sau khi loại bỏ stop words và stemming.</p><h3 id=contains-predicate-với-toán-tử-and><strong>CONTAINS predicate với toán tử AND</strong></h3><p>Truy vấn FTS đơn giản trong SQL Server sử dụng thuật ngữ <a href="https://learn.microsoft.com/en-us/sql/t-sql/queries/contains-transact-sql?view=sql-server-ver16">CONTAINS</a> . CONTAINS Thuật ngữ này trong Transact-SQL cung cấp một cách linh hoạt để thực hiện FTS nâng cao trong cơ sở dữ liệu SQL Server. Nó hỗ trợ nhiều điều kiện tìm kiếm, tìm kiếm gần đúng, ký tự đại diện và các tính năng từ điển đồng nghĩa, cho phép bạn tùy chỉnh truy vấn để đáp ứng các yêu cầu cụ thể.</p><p>Trong truy vấn mẫu sau, thuật ngữ CONTAINS kiểm tra các từ “entry” và “level” trong cột Mô tả:</p><p>SELECT ProductDescriptionID,Description</p><p>FROM [AdventureWorks2019].[Production].[ProductDescription]</p><p>WHERE CONTAINS([Description], &rsquo;entry & level&rsquo;);</p><p><img src=/learning-aws/3-blogstranslated/3.3-blog3/image/image14.jpg alt=image14.jpg></p><h3 id=chứa-vị-ngữ-với-toán-tử-or><strong>Chứa vị ngữ với toán tử OR</strong></h3><p>Điều này tương tự như trường hợp sử dụng trước đó sử dụng CONTAINS vị ngữ, ngoại trừ việc kiểm tra được thực hiện bằng OR toán tử. Trong truy vấn mẫu sau, vị ngữ kiểm tra &ldquo;mục nhập&rdquo;, &ldquo;mức&rdquo; hoặc cả hai:</p><p>SELECT ProductDescriptionID,Description<br>FROM [AdventureWorks2019].[Production].[ProductDescription]<br>WHERE CONTAINS([Description], &rsquo;entry | level&rsquo;);</p><p>Bạn có thể viết lại truy vấn trong PostgreSQL bằng cách sử dụng các hàm to_tsvector và to_tsquery như sau và sử dụng giá trị từ điển tìm kiếm văn bản tích hợp mặc định là pg_catalog.simple <em>.</em></p><p><img src=/learning-aws/3-blogstranslated/3.3-blog3/image/image12.jpg alt=image12.jpg></p><h3 id=vị-ngữ-freetext><strong>Vị ngữ FREETEXT</strong></h3><p>Thuật <a href="https://learn.microsoft.com/en-us/sql/t-sql/queries/freetext-transact-sql?view=sql-server-ver16">FREETEXT</a> ngữ vị ngữ trong <a href="https://learn.microsoft.com/en-us/sql/t-sql/language-reference?view=sql-server-ver16">Transact-SQL</a> (T-SQL) được sử dụng để thực hiện tìm kiếm toàn văn bản trong cơ sở dữ liệu SQL Server. Không giống như CONTAINS hàm, vốn yêu cầu các điều khoản và điều kiện cụ thể, thuật ngữ này FREETEXT cho phép tìm kiếm linh hoạt hơn và dựa trên ngôn ngữ tự nhiên.</p><p>Trong các truy vấn mẫu sau, FREETEXT hãy kiểm tra các từ “entry” hoặc “level” và dạng của chúng (sử dụng phép loại suy) trong cột Mô tả:</p><p>SELECT ProductDescriptionID, Description<br>FROM [AdventureWorks2019].[Production].[Product description]<br>WHERE FREETEXT([Description], &rsquo;entry level&rsquo;);</p><p>Bạn có thể viết lại truy vấn trong PostgreSQL bằng các hàm to_tsvector and to_tsquery như sau với giá trị cấu hình pg_catalog.english. Cấu hình này sử dụng english_stemand một từ điển đơn giản để chuyển đổi token thành lexeme. Do đó, lexeme đại diện cho một dạng chuẩn hóa của một từ hoặc token có thể được lập chỉ mục và sử dụng cho các thao tác tìm kiếm.</p><p><img src=/learning-aws/3-blogstranslated/3.3-blog3/image/image1.jpg alt=image1.jpg></p><h3 id=hàm-freetexttable-với-rank><strong>Hàm FREETEXTTABLE với RANK</strong></h3><p>FTS trong SQL Server có thể tạo ra một điểm số (hoặc giá trị thứ hạng) tùy chọn, thể hiện mức độ liên quan của dữ liệu được trả về bởi truy vấn toàn văn. Giá trị thứ hạng này được tính toán trên mỗi hàng và có thể được sử dụng làm tiêu chí sắp xếp để sắp xếp tập kết quả của truy vấn theo mức độ liên quan. Giá trị thứ hạng chỉ hiển thị thứ tự liên quan tương đối của các hàng trong tập kết quả. Giá trị thực tế không quan trọng và thường khác nhau mỗi lần bạn chạy truy vấn. Giá trị thứ hạng không có ý nghĩa gì giữa các truy vấn.</p><p>Trong các truy vấn mẫu sau, <a href="https://learn.microsoft.com/en-us/sql/relational-databases/system-functions/freetexttable-transact-sql?view=sql-server-ver16">FREETEXTTABLE</a> kiểm tra các từ “entry” hoặc “level” và dạng của chúng (sử dụng phép loại suy) trong cột Mô tả và cũng lấy thông tin RANK:</p><p>SELECT FT_TBL.[ProductDescriptionID],FT_TBL.[Description], KEY_TBL.[RANK]</p><p>FROM [AdventureWorks2019].[Production].[ProductDescription] FT_TBL</p><p>INNER JOIN FREETEXTTABLE([AdventureWorks2019].[Production].[ProductDescription], [Description], &rsquo;entry OR level&rsquo;,1033) AS KEY_TBL</p><pre><code>  ON  FT\_TBL.\[ProductDescriptionID\] \=KEY\_TBL.\[KEY\]
</code></pre><p>ORDER BY KEY_TBL.[RANK] DESC,FT_TBL.[ProductDescriptionID];</p><p>Trong PostgreSQL, <a href=https://www.postgresql.org/docs/current/textsearch-controls.html#TEXTSEARCH-RANKING>ts_rank</a> hàm này được sử dụng để tính toán thứ hạng liên quan của kết quả tìm kiếm dựa trên mức độ khớp của chúng với một truy vấn cụ thể. Thứ hạng được tính toán bằng cách sử dụng một giá trị số biểu thị mức độ khớp của tài liệu với các thuật ngữ tìm kiếm trong truy vấn.</p><p><img src=/learning-aws/3-blogstranslated/3.3-blog3/image/image6.jpg alt=image6.jpg></p><p>Hàm này <a href=https://www.postgresql.org/docs/current/textsearch-controls.html#TEXTSEARCH-HEADLINE>ts_headline</a>được sử dụng để tạo phiên bản tóm tắt văn bản của tài liệu, làm nổi bật các phần liên quan nhất khớp với truy vấn tìm kiếm cụ thể. Hàm này hữu ích để tạo các đoạn trích hoặc tiêu đề kết quả tìm kiếm, cung cấp ngữ cảnh cho người dùng về lý do tại sao một tài liệu nhất định được áp dụng cho tìm kiếm của họ. Ảnh chụp màn hình sau đây hiển thị kết quả của cột tiêu đề truy vấn PostgreSQL được tạo bằng hàm ts_headline.</p><p><img src=/learning-aws/3-blogstranslated/3.3-blog3/image/image10.png alt=image10.png>![][image5]</p><h3 id=các-hàm-containstable-và-formsof-với-rank><strong>Các hàm CONTAINSTABLE và FORMSOF với RANK</strong></h3><p><strong>Hàm này <a href="https://learn.microsoft.com/en-us/previous-versions/office/developer/exchange-server-2003/aa123618%5C%28v=exchg.65%5C%29">FORMSOF</a> trong SQL Server được sử dụng để thực hiện <em>tìm kiếm biến tố</em> . Tìm kiếm biến tố bao gồm việc tìm kiếm các dạng khác nhau của một từ, chẳng hạn như dạng số nhiều, thì động từ hoặc các dạng từ liên quan. Điều này có thể giúp bạn tìm thấy các tài liệu liên quan ngay cả khi chúng chứa các biến thể của thuật ngữ tìm kiếm, do đó cải thiện độ chính xác của tìm kiếm.</strong></p><p><strong>Trong các truy vấn mẫu sau, <a href="https://learn.microsoft.com/en-us/sql/relational-databases/system-functions/containstable-transact-sql?view=sql-server-ver16">CONTAINSTABLE</a> kiểm tra từ “gear” và dạng của chúng (sử dụng INFLECTIONAL) trong cột Mô tả và cũng lấy RANK thông tin:</strong></p><p><strong>SELECT FT_TBL.[ProductDescriptionID],FT_TBL.[Description], KEY_TBL.[RANK]</strong></p><p><strong>FROM [AdventureWorks2019].[Production].[ProductDescription] FT_TBL</strong></p><pre><code>**INNER JOIN CONTAINSTABLE(\[AdventureWorks2019\].\[Production\].\[ProductDescription\],**

                         **\[Description\], 'FORMSOF(INFLECTIONAL,''gear'')',1033)**
</code></pre><p><strong>AS KEY_TBL</strong></p><p><strong>ON FT_TBL.[ProductDescriptionID] = KEY_TBL.[KEY]</strong></p><p><strong>ORDER BY KEY_TBL.[RANK] DESC,FT_TBL.[ProductDescriptionID];</strong></p><p><strong>Trong các truy vấn PostgreSQL, các cụm từ trước tiên được chia thành các từ hoặc mã thông báo, và các từ này được chuẩn hóa và phân loại thành các từ gốc (lexeme) bằng cách sử dụng pg_catalog.english cấu hình FTS. Các lexeme này sẽ giống nhau cho các dạng khác nhau (phân loại) của một từ. Do đó, tính năng này sẽ tự động xử lý các tìm kiếm biến tố.</strong></p><table><thead><tr><th style=text-align:left>Máy chủ SQL</th></tr></thead><tbody><tr><td style=text-align:left><strong>SELECT FT_TBL.[ProductDescriptionID],FT_TBL.[Description], KEY_TBL.[RANK] FROM [AdventureWorks2019].[Production].[ProductDescription] FT_TBL INNER JOIN CONTAINSTABLE([AdventureWorks2019].[Production].[ProductDescription], [Description], &lsquo;FORMSOF(INFLECTIONAL,&lsquo;&lsquo;gear&rsquo;&rsquo;)&rsquo;,1033) AS KEY_TBL ON FT_TBL.[ProductDescriptionID] = KEY_TBL.[KEY] ORDER BY KEY_TBL.[RANK] DESC,FT_TBL.[ProductDescriptionID]; <img src=/learning-aws/3-blogstranslated/3.3-blog3/image/image5.png alt=image5.png>![][image6]</strong></td></tr><tr><td style=text-align:left><strong>PostgreSQL</strong></td></tr><tr><td style=text-align:left>**SELECT p.productdescriptionid ,p.description, ts_rank(to_tsvector(&lsquo;pg_catalog.english&rsquo;,p.Description), query) AS rank, ts_headline(&lsquo;pg_catalog.english&rsquo;,p.Description,query) headline FROM production.productdescription p, to_tsquery(&lsquo;pg_catalog.english&rsquo;,&lsquo;gear&rsquo;) query WHERE query @@ to_tsvector(&lsquo;pg_catalog.english&rsquo;,p.Description) ORDER BY rank desc,p.productdescriptionid; <img src=/learning-aws/3-blogstranslated/3.3-blog3/image/image15.png alt=image15.png></td></tr></tbody></table><h2 id=cải-thiện-hiệu-suất-truy-vấn-trong-postgresql><strong>Cải thiện hiệu suất truy vấn trong PostgreSQL</strong></h2><p>Đối với các truy vấn PostgreSQL mẫu được hiển thị trước đó, to_tsvector hàm này lấy các tsvector giá trị từ cột Mô tả trong productdescription bảng. Trong các phần sau, chúng tôi sẽ giới thiệu cho bạn các tùy chọn khác nhau để cải thiện hiệu suất truy vấn.</p><h3 id=giải-pháp-1-sử-dụng-chỉ-mục-gin><strong>Giải pháp 1: Sử dụng chỉ mục GIN</strong></h3><p>Chỉ mục GIN (Generalized Inverted Index) trong PostgreSQL là một phương pháp lập chỉ mục phổ biến được sử dụng để tăng tốc hiệu quả việc tìm kiếm các kiểu dữ liệu phức tạp như JSON và tìm kiếm toàn văn bản. Chỉ mục cơ sở dữ liệu chuẩn, một cây B, được thiết kế để kiểm tra tính bằng nhau, trong khi GIN được thiết kế cho các mẫu tìm kiếm hoạt động trên các cấu trúc dữ liệu lồng nhau hoặc tổng hợp, cho phép các mẫu tìm kiếm biểu cảm hơn. Bằng cách lập chỉ mục các thành phần của các kiểu dữ liệu phức tạp riêng biệt, chỉ mục GIN cho phép truy vấn nhanh hơn trên các mảng, dữ liệu JSON và các thao tác tìm kiếm văn bản. Điều này khiến chỉ mục GIN trở thành một công cụ hữu ích để cải thiện hiệu suất của các truy vấn liên quan đến các cấu trúc dữ liệu phức tạp trong cơ sở dữ liệu PostgreSQL.</p><p><a href=https://www.postgresql.org/docs/current/gin-intro.html>Trong cách tiếp cận này, bạn tạo chỉ mục GIN</a> dựa trên biểu thức trên cột quan tâm trong bảng mô tả sản phẩm.</p><ol><li>Chạy lệnh sau:</li></ol><p>CREATE INDEX productdescription_gin_idx ON production.productdescription</p><ol start=2><li>USING GIN (to_tsvector(&lsquo;pg_catalog.english&rsquo;, Description));</li><li>Nếu bảng có hàng triệu hàng, bạn có thể tăng maintenance_work_mem tham số cấu hình ở cấp độ phiên để tăng tốc thời gian tạo chỉ mục. maintenance_work_mem chỉ định lượng bộ nhớ tối đa tính bằng MB sẽ được sử dụng cho các hoạt động bảo trì như tạo INDEX—theo mặc định (PostgreSQL), là 64 MB.</li><li>Chạy truy vấn EXPLAIN ANALYZE sau:</li></ol><p>EXPLAIN ANALYZE</p><p>SELECT * FROM production.productdescription</p><p>WHERE to_tsvector(&lsquo;pg_catalog.english&rsquo;, Description) @@ to_tsquery(&lsquo;pg_catalog.english&rsquo;,&rsquo;entry | level&rsquo;)</p><ol start=5><li>ORDER BY productdescriptionid DESC;</li></ol><p>Đầu ra hiển thị quá trình quét chỉ mục bitmap đang được thực hiện trên productdescription_gin_index, giúp cải thiện hiệu suất truy vấn. Ảnh chụp màn hình sau đây cho thấy kế hoạch giải thích trước khi tạo chỉ mục.</p><p><img src=/learning-aws/3-blogstranslated/3.3-blog3/image/image13.png alt=image13.png></p><p>Ảnh chụp màn hình sau đây cho thấy kế hoạch giải thích sau khi tạo chỉ mục.</p><p><img src=/learning-aws/3-blogstranslated/3.3-blog3/image/image7.png alt=image7.png></p><p>Trong trường hợp này, chúng ta có thể thấy hiệu suất truy vấn được cải thiện khi sử dụng chỉ mục GIN. Mặc dù nhìn chung, việc sử dụng chỉ mục GIN cho tìm kiếm toàn văn trong PostgreSQL có thể giúp cải thiện hiệu suất, bạn cần lưu ý những đánh đổi khác về hiệu suất, bao gồm thời gian cần thiết để xây dựng chỉ mục và dung lượng lưu trữ bổ sung mà chỉ mục yêu cầu.</p><h3 id=giải-pháp-2-sử-dụng-cột-được-tạo-đã-lưu-trữ><strong>Giải pháp 2: Sử dụng cột được tạo đã lưu trữ</strong></h3><p>Trong cách tiếp cận này, bạn tạo một cột tính toán description_tsv chứa tsvector giá trị từ cột mô tả trong bảng theo sau là chỉ mục GIN trên cột tính toán.</p><ol><li>Chạy các lệnh sau:</li></ol><p>ALTER TABLE production.productdescription</p><p>ADD COLUMN description_tsv tsvector</p><p>GENERATED ALWAYS AS (to_tsvector(&lsquo;pg_catalog.english&rsquo;,Description )) STORED;</p><ol start=2><li>CREATE INDEX productdescription_gin_idx ON production.productdescription USING GIN(description_tsv);</li><li>Chạy truy vấn EXPLAIN ANALYZE mẫu sau:</li></ol><p>EXPLAIN ANALYZE</p><p>SELECT *</p><p>FROM production.productdescription</p><p>WHERE description_tsv @@ to_tsquery(&lsquo;pg_catalog.english&rsquo;,&rsquo;entry | level&rsquo;)</p><ol start=4><li>ORDER BY productdescriptionid DESC;</li></ol><p>Đầu ra cho thấy quá trình quét chỉ mục bitmap đang được thực hiện trên productdescription_gin_index , trong trường hợp này chứng minh sự cải thiện về hiệu suất truy vấn:</p><p><img src=/learning-aws/3-blogstranslated/3.3-blog3/image/image4.png alt=image4.png></p><h2 id=tìm-kiếm-toàn-văn-bản-trong-postgresql-bằng-tiện-ích-mở-rộng-pg_trgm><strong>Tìm kiếm toàn văn bản trong PostgreSQL bằng tiện ích mở rộng pg_trgm</strong></h2><p>Trong PostgreSQL, pg_trgm phần mở rộng này được triển khai cho các chức năng tìm kiếm văn bản sử dụng trigram. Trigram về cơ bản là tập hợp ba ký tự liên tiếp được trích xuất từ ​​một chuỗi cho trước. Bằng cách sử dụng trigram, người dùng có thể xác định sự tương đồng hoặc trùng khớp trong các mẫu văn bản bên trong chuỗi bằng cách so sánh số lượng trigram trùng khớp giữa các chuỗi, cùng với tham số ngưỡng tương đồng được xác định trước được thiết lập trước khi thực hiện tìm kiếm.</p><p>Tiện pg_trgm ích mở rộng cung cấp các toán tử có thể được sử dụng để tạo chỉ mục trigram trên các cột văn bản trong bảng cần tìm kiếm. Chỉ mục này cho phép thực hiện các phép toán tương tự hiệu quả trên các cột được lập chỉ mục. Tiện ích mở rộng cung cấp ba phép toán tương tự: similarity (%), word_similarity (&lt;%), và strict_word_similarity (&lt;&lt;%). Các tham số ngưỡng cho các phép toán tương ứng là pg_trgm.similarity_threshold, pg_trgm.word_similarity_threshold, và pg_trgm.strict_word_similarity_threshold, có thể được đặt thành giá trị từ 0 (không tương tự) đến 1 (khớp hoàn hảo). Các hàm similarity(), word_similarty(), và strict_word_similarity()được sử dụng để tính điểm tương tự. Bạn có thể sử dụng pg_trgmnhư trong đoạn mã sau:</p><ol><li>Chạy lệnh sau để tạo phần mở rộng pg_trgm:<br>CREATE EXTENSION pg_trgm;</li><li>Chạy lệnh sau để tạo chỉ mục GIN trên cột productdescription:</li><li>CREATE INDEX productdescription_trgm_idx ON production.productdescription USING GIN (Description gin_trgm_ops);</li><li>Chạy lệnh sau để đặt giá trị cấu hình similarity_threshold thành 0,2. Tính năng similarity sẽ kiểm tra các trigram chung giữa hai chuỗi và trả về giá trị từ 0–1.</li></ol><p>SET pg_trgm.similarity_threshold = 0.2;</p><p>SET enable_seqscan = off;</p><p>SELECT productdescriptionid, Description, similarity(Description, &rsquo;entry level&rsquo;) AS sml</p><p>FROM production.product description</p><p>WHERE Description % &rsquo;entry level&rsquo;</p><ol start=5><li>ORDER BY sml DESC, Description;</li><li><img src=/learning-aws/3-blogstranslated/3.3-blog3/image/image9.png alt=image9.png></li><li>Chạy lệnh sau để đặt giá trị cấu hình word_similarity_threshold thành 0,6. word_similarity kiểm tra các trigram chung giữa các chuỗi ở cấp độ từ.</li></ol><p>SET pg_trgm.word_similarity_threshold = 0.6;</p><p>SET enable_seqscan = off;</p><p>SELECT productdescriptionid, Description, word_similarity(&rsquo;entry level&rsquo;, Description) AS sml</p><p>FROM production.productdescription</p><p>WHERE &rsquo;entry level&rsquo; &lt;% Description</p><ol start=8><li>ORDER BY sml DESC, Description;</li><li><img src=/learning-aws/3-blogstranslated/3.3-blog3/image/image11.png alt=image11.png></li><li>Chạy lệnh sau để đặt giá trị cấu hình strict_word_similarity_threshold thành 0,6. strict_word_similarity giống như word_similarity nhưng nó chỉ xem xét các trigram chung khi cả hai từ giống hệt nhau.</li></ol><p>SET pg_trgm.strict_word_similarity_threshold = 0.6;</p><p>SET enable_seqscan = off;</p><p>SELECT productdescriptionid, Description, strict_word_similarity(&lsquo;aluminum cups and hollow axle&rsquo;, Description) AS sml</p><p>FROM production.productdescription</p><p>WHERE &rsquo;entry level&rsquo; &lt;&lt;% Description</p><ol start=11><li>ORDER BY sml DESC, Description;</li><li><img src=/learning-aws/3-blogstranslated/3.3-blog3/image/image8.png alt=image8.png></li><li>Chạy lệnh sau để xóa chỉ mục và kích hoạt quét tuần tự:</li><li>DROP INDEX production.productdescription_trgm_idx;</li></ol><h2 id=tìm-kiếm-toàn-văn-bản-trong-postgresql-bằng-tiện-ích-mở-rộng-pg_bigm><strong>Tìm kiếm toàn văn bản trong PostgreSQL bằng tiện ích mở rộng pg_bigm</strong></h2><p>Phần pg_bigmmở rộng trong PostgreSQL tăng cường khả năng tìm kiếm toàn văn bản, đặc biệt đối với các ngôn ngữ có bộ ký tự phức tạp như ngôn ngữ châu Á.</p><p>Bigram là một nhóm hai ký tự liên tiếp được lấy từ một chuỗi. Phần mở rộng này sử dụng phương pháp lập chỉ mục bigram, bao gồm việc chia văn bản thành các cặp ký tự liên tiếp và xây dựng một chỉ mục dựa trên các bigram này. Phần <em>mở</em>pg_bigm rộng cung cấp bigm_similarity()hàm, toán tử tương tự bigm = %và pg_bigm.similarity_limittham số ngưỡng. Bạn có thể sử dụng pg_bigmnhư sau:</p><ol><li>Chạy lệnh sau để tạo phần mở rộng pg_bigm. Để biết hướng dẫn tạo phần mở rộng trong Amazon RDS for PostgreSQL, hãy tham khảo bài viết <a href=https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Appendix.PostgreSQL.CommonDBATasks.Extensions.html>Sử dụng phần mở rộng PostgreSQL với Amazon RDS for PostgreSQL</a> .</li><li>CREATE EXTENSION pg_bigm;</li><li>Chạy lệnh sau để tạo chỉ mục GIN trên cột productdescription:</li><li>CREATE INDEX productdescription_bigm_idx ON production.productdescription USING gin (Description gin_bigm_ops);</li><li>Chạy lệnh sau để đặt giá trị cấu hình similarity_limit thành 0,15. Kiểm tra tính tương đồng để tìm các bigram chung giữa hai chuỗi và trả về giá trị từ 0–1.</li></ol><p>SET pg_bigm.similarity_limit TO 0.15;</p><p>SELECT *,bigm_similarity(Description, &lsquo;%entry level%&rsquo;) rank1</p><p>FROM production.productdescription</p><p>WHERE Description =% &lsquo;%entry level%&rsquo;</p><ol start=6><li>ORDER BY rank1 DESC;</li><li><img src=/learning-aws/3-blogstranslated/3.3-blog3/image/image3.png alt=image3.png></li><li>Chạy lệnh sau để xóa chỉ mục và bật quét tuần tự:</li></ol><p>DROP INDEX production.productdescription_bigm_idx;</p><ol start=9><li>SET enable_seqscan = on;</li></ol><h2 id=phần-kết-luận><strong>Phần kết luận</strong></h2><p>Trong bài viết này, chúng tôi đã hướng dẫn bạn cách di chuyển FTS từ SQL Server sang PostgreSQL và so sánh một số trường hợp sử dụng phổ biến. Việc di chuyển tìm kiếm toàn văn bản từ SQL Server sang PostgreSQL đòi hỏi phải viết lại mã thủ công. Để tìm hiểu thêm, vui lòng tham khảo các <a href=https://www.postgresql.org/docs/13/textsearch-limitations.html>hạn chế của tính năng tìm kiếm văn bản trong PostgreSQL</a> . Chúng tôi cũng đã hướng dẫn bạn cách sử dụng các phần mở rộng pg_trgm và pg_bigm trong PostgreSQL để triển khai FTS.</p><h3></h3><p><strong>Về các tác giả</strong></p><p><img src=/learning-aws/3-blogstranslated/3.3-blog3/image/image2.jpg alt=image2.jpg>![][image15]</p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/learning-aws/vi/3-blogstranslated/3.2-blog2/ title="Blog 2"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/learning-aws/vi/4-eventparticipated/ title="Các events đã tham gia" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1e3px;overflow:scroll;position:absolute;top:-1e3px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/learning-aws/js/clipboard.min.js?1765270353></script><script src=/learning-aws/js/perfect-scrollbar.min.js?1765270353></script><script src=/learning-aws/js/perfect-scrollbar.jquery.min.js?1765270353></script><script src=/learning-aws/js/jquery.sticky.js?1765270353></script><script src=/learning-aws/js/featherlight.min.js?1765270353></script><script src=/learning-aws/js/highlight.pack.js?1765270353></script><script>hljs.initHighlightingOnLoad()</script><script src=/learning-aws/js/modernizr.custom-3.6.0.js?1765270353></script><script src=/learning-aws/js/learn.js?1765270353></script><script src=/learning-aws/js/hugo-learn.js?1765270353></script><script src=/learning-aws/mermaid/mermaid.js?1765270353></script><script>mermaid.initialize({startOnLoad:!0})</script><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,(e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date),(i=t.createElement(n),a=t.getElementsByTagName(n)[0]),i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-158079754-2","auto"),ga("send","pageview")</script></body></html>